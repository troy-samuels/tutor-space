# TutorLingua Design Unification Plan: "Adaptive Immersion"
*Generated by Gemini 3 Pro — Feb 13, 2026*

---

## 1. Design Direction: "Adaptive Immersion" (Context-Aware Theming)

Instead of forcing the entire app into Dark Mode (too heavy for admin/billing) or washing out Practice mode (boring), we implement **Scoped Theming**.

- **Dashboard/Student/Marketing:** Remains **Light Mode SaaS** (clean, legible, trusted) but adopts the **roundness** and **micro-interactions** of Practice mode.
- **Practice Mode:** Remains **Dark Mode Immersive**, but standardised using **semantic CSS variables** instead of hardcoded hex values. This allows Light Mode Practice later or themed accessibility.
- **The Bridge:** A shared animation library and consistent border-radius (`rounded-3xl` for containers, `rounded-xl` for inner elements).

---

## 2. globals.css Changes (The Foundation)

**File:** `app/globals.css`

**Add these new variables to `:root`:**
```css
:root {
  /* ...existing Light Mode vars remain... */

  /* NEW: Immersive Mode (extracted Practice colors as semantic vars) */
  --immersive-background: #0D0D0C;
  --immersive-card: #1A1917;
  --immersive-foreground: #F5F2EF;
  --immersive-primary: #E8784D;
  --immersive-accent: #5A7A5E;
  --immersive-muted: rgba(245, 242, 239, 0.1);
  --immersive-border: rgba(245, 242, 239, 0.08);

  /* Animation Standardisation */
  --spring-bounce: cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
```

**Add utility class for Practice containers:**
```css
.theme-immersive {
  background-color: var(--immersive-background);
  color: var(--immersive-foreground);
  --primary: var(--immersive-primary);
  --card: var(--immersive-card);
  --border: var(--immersive-border);
}
```

---

## 3. UI Primitive Changes (components/ui/)

### `components/ui/button.tsx`
- **Add** `immersive` variant:
  ```tsx
  immersive: "bg-[var(--immersive-primary)] text-white hover:bg-[#D36135] shadow-[0_4px_14px_0_rgba(232,120,77,0.39)] transition-transform active:scale-95",
  ```
- **Why:** Practice buttons need to pop against dark backgrounds while Dashboard buttons stay subtle.

### `components/ui/card.tsx`
- **Verify** `rounded-3xl` is consistent (already is).
- **Ensure** `.theme-immersive` wrapper overrides `bg-card` correctly via CSS variable scoping.

### `components/ui/progress.tsx`
- **Add** `transition-all duration-500` to the Indicator for smooth XP gains.
- **Consider** reducing default height to `h-3` for sleeker look across both contexts.

### `components/ui/badge.tsx`
- **Increase** padding to `px-4 py-1.5` — Practice "Correction Chips" are chunkier/touch-friendly, Dashboard badges are too tight currently.

### `components/ui/input.tsx`
- No immediate changes needed — already uses CSS vars.

### `components/ui/tabs.tsx`
- No immediate changes needed.

---

## 4. Practice Component Migration (19 files → CSS vars)

### Batch Replacement Rules (apply to ALL practice components):
| Hardcoded Value | Replace With |
|:---|:---|
| `#E8784D` | `text-primary` / `bg-primary` (inside `theme-immersive` wrapper) |
| `#0D0D0C` | `bg-background` (scoped via `theme-immersive`) |
| `#1A1917` | `bg-card` (scoped via `theme-immersive`) |
| `#F5F2EF` | `text-foreground` (scoped via `theme-immersive`) |
| `#5A7A5E` | `text-accent` / `bg-accent` (scoped via `theme-immersive`) |

### File-by-file specifics:

#### `components/practice/PracticeChat.tsx` (975 lines) — LARGEST FILE
- Wrap main container in `<div className="theme-immersive ...">`
- Replace all `#1A1917` → `bg-card`
- Replace all `#F5F2EF` → `text-foreground`
- Replace all `#E8784D` → `text-primary` / `bg-primary`

#### `components/practice/LevelAssessment.tsx` (607 lines)
- Move hardcoded colour arrays to a constant object at top of file:
  ```tsx
  const COLORS = {
    active: 'var(--immersive-primary)',
    correct: 'var(--accent)',
    wrong: 'var(--destructive)',
  };
  ```
- Replace inline SVG progress ring colours with these constants

#### `components/practice/ResultsCard.tsx` (443 lines)
- Replace `shadow-[0_0_80px_-20px_rgba(232,120,77,0.15)]` → new utility class `shadow-glow` (defined in globals.css or tailwind config)
- Replace all hardcoded hex colours with CSS var equivalents

#### `components/practice/SplashScreen.tsx` (218 lines)
- Change particle fill colours from hardcoded `#E8784D` / `#5A7A5E` to `var(--primary)` / `var(--accent)` so they adapt to theme changes
- Replace `#0D0D0C` background references

#### `components/practice/WordTile.tsx` (60 lines)
- Replace state colours:
  - Selected: `bg-primary/20 border-primary`
  - Correct: `bg-green-500/20 text-green-400`
  - Wrong: `bg-destructive/20 text-destructive`

#### `components/practice/ChatBubble.tsx` (85 lines)
- Replace hardcoded dark backgrounds → `bg-card`
- Replace hardcoded text → `text-foreground`

#### `components/practice/CorrectionChip.tsx` (48 lines)
- Replace hardcoded accent colours → `text-primary`, `bg-primary/10`

#### `components/practice/LanguagePicker.tsx` (103 lines)
- Replace flag container backgrounds → `bg-card`
- Replace selection highlight → `border-primary`

#### `components/practice/Leaderboard.tsx` (58 lines)
- Replace background → `bg-card`
- Replace highlight colours → `text-primary`

#### `components/practice/ListenButton.tsx` (115 lines)
- Replace hardcoded colours → `bg-primary`, `text-foreground`

#### `components/practice/VoiceInputToggle.tsx` (301 lines)
- Replace all hardcoded hex → CSS var equivalents

#### `components/practice/UpgradeGate.tsx` (111 lines)
- Replace hardcoded colours → semantic vars

#### `components/practice/ChallengeComparison.tsx` (64 lines)
- Replace hardcoded colours → semantic vars

#### `components/practice/StreakShare.tsx` (70 lines)
- Replace hardcoded colours → semantic vars

#### `components/practice/WhyInsightCard.tsx` (42 lines)
- Replace hardcoded colours → semantic vars

#### `components/practice/TypingIndicator.tsx` (26 lines)
- Replace dot colours → `bg-primary/50`

#### `components/practice/ScenarioBuilder.tsx` (735 lines)
- Replace hardcoded colours → semantic vars (large file, careful review needed)

#### `components/practice/ScenarioDetailSheet.tsx` (639 lines)
- Replace hardcoded colours → semantic vars

---

## 5. Practice Layout Change (Kill the 430px phone sim)

**File:** `app/(practice)/layout.tsx`

**Current:**
```tsx
<div className="min-h-[100dvh] bg-[#0D0D0C]">
  <div className="min-h-[100dvh] bg-[#1A1917] text-[#F5F2EF] font-sans flex flex-col max-w-[430px] mx-auto relative overflow-hidden shadow-[0_0_80px_-20px_rgba(232,120,77,0.15)]">
    {children}
  </div>
</div>
```

**New:**
```tsx
<div className="theme-immersive min-h-screen w-full flex items-center justify-center p-0 sm:p-4">
  <div className="w-full sm:max-w-2xl min-h-screen sm:min-h-0 sm:rounded-[2.5rem] bg-card/50 backdrop-blur-xl overflow-hidden sm:border sm:border-white/5 sm:shadow-2xl">
    {children}
  </div>
</div>
```

**Result:** Mobile = full screen. Desktop = floating "Focus Card" (max-w-2xl) that looks premium, not cramped.

---

## 6. Practice Route Pages (hardcoded colours)

#### `app/(practice)/practice/challenge/[challengerId]/page.tsx`
- Replace all hardcoded hex → CSS var Tailwind classes

#### `app/(practice)/practice/result/[sessionId]/page.tsx`
- Replace all hardcoded hex → CSS var Tailwind classes

#### `app/(practice)/practice/start/[assignmentId]/page.tsx`
- Replace all hardcoded hex → CSS var Tailwind classes

#### `app/practice/start/[assignmentId]/page.tsx` (duplicate route)
- Same treatment as above

#### `app/api/og/practice-result/[sessionId]/route.tsx`
- This is an OG image generator — hardcoded colours are OK here (static image output), but consider using the same constants for consistency

---

## 7. Dashboard Components (Injecting Soul)

#### `components/dashboard/shell.tsx`
- No visual changes needed — layout structure is solid

#### `components/dashboard/metric-cards.tsx`
- **Add:** `hover:-translate-y-1 hover:shadow-lg transition-all duration-300 ease-[var(--spring-bounce)]`
- **Change:** Corners from `rounded-xl` → `rounded-2xl` to match Practice softness

#### `components/dashboard/header.tsx`
- **Add:** Consider a streak/XP indicator near user profile (bridge element)

#### `components/dashboard/bottom-nav.tsx`
- **Change:** Active tab indicator should use `bg-primary` with spring animation

#### `components/dashboard/upcoming-sessions.tsx`
- **Add:** Subtle hover animation on session cards

#### `components/dashboard/student-list.tsx`, `student-list-row.tsx`
- **Add:** `hover:bg-muted/50 transition-colors duration-200`

#### `components/dashboard/calendar-event-block.tsx`
- **Change:** `rounded-xl` → `rounded-2xl`

#### `components/dashboard/AssignPracticeButton.tsx`
- **Remove** hardcoded `#E8784D` / `#5A7A5E` → use `bg-primary`, `text-accent`

#### `components/dashboard/ReferralShareCard.tsx`
- **Remove** hardcoded practice colours → use CSS vars

---

## 8. Landing Page Components

#### `components/landing/Hero.tsx`
- **Replace** `text-gray-700` → `text-muted-foreground`
- **Replace** `bg-brand-white` → `bg-background`
- **Adopt** kinetic text cycling (already has `LanguageRolodex` which is similar — verify it uses spring physics)

#### `components/landing/Navigation.tsx`
- Ensure using design tokens, not hardcoded grays

#### `components/landing/PricingSection.tsx`
- **Replace** any hardcoded colours → design tokens
- **Add** hover spring animation to pricing cards

#### `components/landing/FAQSection.tsx`, `Footer.tsx`, etc.
- **Audit** for `text-gray-*` usage → replace with `text-muted-foreground`

---

## 9. Student Portal Components

#### `components/student/HomeworkList.tsx`
- **Remove** hardcoded practice colours that leaked in
- Use `bg-primary`, `text-accent` via CSS vars

#### `app/student/assignments/AssignmentsPageClient.tsx`
- **Remove** hardcoded practice colours → use CSS vars

#### `components/drills/GapFillGame.tsx`, `MatchGame.tsx`, `ScrambleGame.tsx`
- **Strategy:** Import `WordTile` and `CorrectionChip` from practice components instead of maintaining separate game tile implementations
- **Why:** One component, one source of truth. The CSS var abstraction means they'll work in light mode (student portal) AND dark mode (practice)

#### `components/student/AIPracticeCard.tsx`, `AIPracticeChat.tsx`
- **Audit** for hardcoded colours → migrate to CSS vars

---

## 10. Animation Strategy

### New File: `lib/animations.ts`
```tsx
export const springTransition = { type: "spring" as const, stiffness: 400, damping: 30 };
export const gentleSpring = { type: "spring" as const, stiffness: 300, damping: 25 };

export const pageVariant = {
  initial: { opacity: 0, y: 20 },
  animate: { opacity: 1, y: 0 },
  exit: { opacity: 0, y: -20 },
};

export const fadeIn = {
  initial: { opacity: 0 },
  animate: { opacity: 1 },
  exit: { opacity: 0 },
};

export const cardHover = {
  whileHover: { y: -4, transition: { type: "spring", stiffness: 300, damping: 20 } },
  whileTap: { scale: 0.98 },
};
```

### Where to Apply:
| Location | Animation | Type |
|:---|:---|:---|
| Dashboard layout | `pageVariant` on route changes | `AnimatePresence` |
| Practice layout | `pageVariant` (already has this) | Keep |
| Dashboard metric cards | `cardHover` | `motion.div` |
| Dashboard session cards | `fadeIn` on mount | `motion.div` |
| All buttons (both contexts) | `whileTap={{ scale: 0.97 }}` | `motion.button` |
| Landing hero | Kinetic text cycling | Already has `LanguageRolodex` |
| Landing pricing cards | `cardHover` | `motion.div` |

---

## 11. Other Affected Files

#### `app/join/tutor-ref/[username]/page.tsx`
- **Remove** hardcoded practice colours → CSS vars

#### `app/(dashboard)/marketing/referrals/page.tsx`
- **Remove** hardcoded practice colours → CSS vars

#### `components/pwa/InstallPrompt.tsx`
- **Remove** hardcoded practice colours → CSS vars

---

## 12. New Shared Component

### `components/shared/ActivityPreviewCard.tsx`
A card for the Dashboard/Student Portal that shows a mini-preview of Practice content.
- **Light mode** card exterior (Dashboard context)
- **Dark mode** mini-preview inside (Practice content thumbnail)
- **Usage:** Teacher assigning practice, Student viewing homework

---

## 13. Migration Priority (Execution Order)

### Phase 1 — Foundation (Do First, Low Risk)
1. `app/globals.css` — Add immersive variables + `.theme-immersive` class
2. `lib/animations.ts` — Create shared animation constants
3. `components/ui/button.tsx` — Add `immersive` variant
4. `components/ui/progress.tsx` — Add transition animation
5. `components/ui/badge.tsx` — Increase padding

### Phase 2 — Practice Layout (High Impact)
6. `app/(practice)/layout.tsx` — Replace 430px phone sim with responsive Focus Card
7. `components/practice/WordTile.tsx` — Migrate to CSS vars (small, easy, high reuse)
8. `components/practice/CorrectionChip.tsx` — Migrate to CSS vars

### Phase 3 — Practice Components (The Grind)
9. `components/practice/SplashScreen.tsx`
10. `components/practice/LanguagePicker.tsx`
11. `components/practice/ChatBubble.tsx`
12. `components/practice/Leaderboard.tsx`
13. `components/practice/ListenButton.tsx`
14. `components/practice/TypingIndicator.tsx`
15. `components/practice/WhyInsightCard.tsx`
16. `components/practice/StreakShare.tsx`
17. `components/practice/ChallengeComparison.tsx`
18. `components/practice/UpgradeGate.tsx`
19. `components/practice/VoiceInputToggle.tsx`
20. `components/practice/ResultsCard.tsx` (443 lines — careful)
21. `components/practice/LevelAssessment.tsx` (607 lines — careful)
22. `components/practice/PracticeChat.tsx` (975 lines — most careful)
23. `components/practice/ScenarioBuilder.tsx` (735 lines — careful)
24. `components/practice/ScenarioDetailSheet.tsx` (639 lines — careful)

### Phase 4 — Practice Routes
25. `app/(practice)/practice/challenge/[challengerId]/page.tsx`
26. `app/(practice)/practice/result/[sessionId]/page.tsx`
27. `app/(practice)/practice/start/[assignmentId]/page.tsx`
28. `app/practice/start/[assignmentId]/page.tsx`

### Phase 5 — Leaked Colours Cleanup
29. `components/dashboard/AssignPracticeButton.tsx`
30. `components/dashboard/ReferralShareCard.tsx`
31. `components/student/HomeworkList.tsx`
32. `components/pwa/InstallPrompt.tsx`
33. `app/student/assignments/AssignmentsPageClient.tsx`
34. `app/join/tutor-ref/[username]/page.tsx`
35. `app/(dashboard)/marketing/referrals/page.tsx`

### Phase 6 — Dashboard Enhancement
36. `components/dashboard/metric-cards.tsx` — Add hover animations + rounded-2xl
37. `components/dashboard/bottom-nav.tsx` — Spring active indicator
38. `components/dashboard/calendar-event-block.tsx` — Softer corners

### Phase 7 — Landing & Marketing
39. `components/landing/Hero.tsx` — Replace `text-gray-700` → design tokens
40. `components/landing/PricingSection.tsx` — Add spring hover
41. Audit remaining landing components for hardcoded grays

### Phase 8 — Student Portal
42. `components/drills/` — Consider importing Practice atoms
43. `components/student/AIPracticeCard.tsx` — Audit
44. `components/student/AIPracticeChat.tsx` — Audit

### Phase 9 — Polish
45. `components/shared/ActivityPreviewCard.tsx` — New bridge component
46. Dashboard `layout.tsx` — Add `AnimatePresence` for page transitions
47. Final visual QA pass across all routes

---

**Total files to touch: ~47**
**Estimated effort: 2-3 focused days**
**Risk: Low** (mostly colour swaps + layout adjustment, no logic changes)
